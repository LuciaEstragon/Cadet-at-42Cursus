/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ft_strlcpy.c                                       :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: lestrada <lestrada@student.42.fr>          +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2025/06/24 19:38:27 by lestrada          #+#    #+#             */
/*   Updated: 2025/06/26 18:08:48 by lestrada         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include <stdio.h>
#include <string.h>
#include <stdlib.h>

// Funciones personalizadas para comparar
char *ft_strchr(const char *s, int c) {
    while (*s != '\0') {
        if (*s == (char)c)
            return (char *)s;
        s++;
    }
    if ((char)c == '\0')
        return (char *)s;
    return NULL;
}

char *ft_strrchr(const char *s, int c) {
    const char *last = NULL;
    while (*s != '\0') {
        if (*s == (char)c)
            last = s;
        s++;
    }
    if ((char)c == '\0')
        return (char *)s;
    return (char *)last;
}

// Función para imprimir resultado de búsqueda
void print_search_result(const char *func_name, const char *result, const char *expected, const char *string, int ch) {
    printf("   %s: ", func_name);
    if (result == NULL) {
        printf("NULL");
    } else {
        printf("encontrado en posición %ld", result - string);
    }
    
    if (result == expected) {
        printf(" ✓ CORRECTO\n");
    } else {
        printf(" ✗ ESPERABA: ");
        if (expected == NULL) {
            printf("NULL");
        } else {
            printf("posición %ld", expected - string);
        }
        printf("\n");
    }
}

// Función para imprimir cadena con caracteres especiales visibles
void print_string_visible(const char *str) {
    printf("\"");
    for (size_t i = 0; str[i] != '\0'; i++) {
        if (str[i] >= 32 && str[i] <= 126) {
            printf("%c", str[i]);
        } else {
            printf("\\x%02X", (unsigned char)str[i]);
        }
    }
    printf("\"");
}

int main(void) {
    printf("=== PRUEBAS DE STRCHR Y STRRCHR ===\n\n");
    
    // Test 1: Carácter presente una vez
    printf("1. Carácter presente una vez:\n");
    const char *str1 = "Hello World";
    char ch1 = 'o';
    
    printf("   Cadena: "); print_string_visible(str1); printf("\n");
    printf("   Buscando: '%c' (0x%02X)\n", ch1, ch1);
    
    print_search_result("strchr custom", ft_strchr(str1, ch1), strchr(str1, ch1), str1, ch1);
    print_search_result("strchr std   ", strchr(str1, ch1), strchr(str1, ch1), str1, ch1);
    print_search_result("strrchr custom", ft_strrchr(str1, ch1), strrchr(str1, ch1), str1, ch1);
    print_search_result("strrchr std   ", strrchr(str1, ch1), strrchr(str1, ch1), str1, ch1);
    printf("\n");
    
    // Test 2: Carácter presente múltiples veces
    printf("2. Carácter presente múltiples veces:\n");
    const char *str2 = "Programming";
    char ch2 = 'r';
    
    printf("   Cadena: "); print_string_visible(str2); printf("\n");
    printf("   Buscando: '%c' (0x%02X)\n", ch2, ch2);
    
    print_search_result("strchr custom", ft_strchr(str2, ch2), strchr(str2, ch2), str2, ch2);
    print_search_result("strchr std   ", strchr(str2, ch2), strchr(str2, ch2), str2, ch2);
    print_search_result("strrchr custom", ft_strrchr(str2, ch2), strrchr(str2, ch2), str2, ch2);
    print_search_result("strrchr std   ", strrchr(str2, ch2), strrchr(str2, ch2), str2, ch2);
    printf("\n");
    
    // Test 3: Carácter no presente
    printf("3. Carácter no presente:\n");
    const char *str3 = "Hello World";
    char ch3 = 'z';
    
    printf("   Cadena: "); print_string_visible(str3); printf("\n");
    printf("   Buscando: '%c' (0x%02X)\n", ch3, ch3);
    
    print_search_result("strchr custom", ft_strchr(str3, ch3), strchr(str3, ch3), str3, ch3);
    print_search_result("strchr std   ", strchr(str3, ch3), strchr(str3, ch3), str3, ch3);
    print_search_result("strrchr custom", ft_strrchr(str3, ch3), strrchr(str3, ch3), str3, ch3);
    print_search_result("strrchr std   ", strrchr(str3, ch3), strrchr(str3, ch3), str3, ch3);
    printf("\n");
    
    // Test 4: Buscar el null terminator
    printf("4. Buscar el null terminator '\\0':\n");
    const char *str4 = "Test String";
    char ch4 = '\0';
    
    printf("   Cadena: "); print_string_visible(str4); printf("\n");
    printf("   Buscando: '\\0' (0x00)\n");
    
    print_search_result("strchr custom", ft_strchr(str4, ch4), strchr(str4, ch4), str4, ch4);
    print_search_result("strchr std   ", strchr(str4, ch4), strchr(str4, ch4), str4, ch4);
    print_search_result("strrchr custom", ft_strrchr(str4, ch4), strrchr(str4, ch4), str4, ch4);
    print_search_result("strrchr std   ", strrchr(str4, ch4), strrchr(str4, ch4), str4, ch4);
    printf("\n");
    
    // Test 5: Primer carácter
    printf("5. Buscar primer carácter:\n");
    const char *str5 = "First character";
    char ch5 = 'F';
    
    printf("   Cadena: "); print_string_visible(str5); printf("\n");
    printf("   Buscando: '%c' (0x%02X)\n", ch5, ch5);
    
    print_search_result("strchr custom", ft_strchr(str5, ch5), strchr(str5, ch5), str5, ch5);
    print_search_result("strchr std   ", strchr(str5, ch5), strchr(str5, ch5), str5, ch5);
    print_search_result("strrchr custom", ft_strrchr(str5, ch5), strrchr(str5, ch5), str5, ch5);
    print_search_result("strrchr std   ", strrchr(str5, ch5), strrchr(str5, ch5), str5, ch5);
    printf("\n");
    
    // Test 6: Último carácter (antes del null)
    printf("6. Buscar último carácter:\n");
    const char *str6 = "Last character";
    char ch6 = 'r';
    
    printf("   Cadena: "); print_string_visible(str6); printf("\n");
    printf("   Buscando: '%c' (0x%02X)\n", ch6, ch6);
    
    print_search_result("strchr custom", ft_strchr(str6, ch6), strchr(str6, ch6), str6, ch6);
    print_search_result("strchr std   ", strchr(str6, ch6), strchr(str6, ch6), str6, ch6);
    print_search_result("strrchr custom", ft_strrchr(str6, ch6), strrchr(str6, ch6), str6, ch6);
    print_search_result("strrchr std   ", strrchr(str6, ch6), strrchr(str6, ch6), str6, ch6);
    printf("\n");
    
    // Test 7: Carácter en medio de repeticiones
    printf("7. Carácter en medio de repeticiones:\n");
    const char *str7 = "aaabaaa";
    char ch7 = 'b';
    
    printf("   Cadena: "); print_string_visible(str7); printf("\n");
    printf("   Buscando: '%c' (0x%02X)\n", ch7, ch7);
    
    print_search_result("strchr custom", ft_strchr(str7, ch7), strchr(str7, ch7), str7, ch7);
    print_search_result("strchr std   ", strchr(str7, ch7), strchr(str7, ch7), str7, ch7);
    print_search_result("strrchr custom", ft_strrchr(str7, ch7), strrchr(str7, ch7), str7, ch7);
    print_search_result("strrchr std   ", strrchr(str7, ch7), strrchr(str7, ch7), str7, ch7);
    printf("\n");
    
    // Test 8: Cadena vacía
    printf("8. Cadena vacía:\n");
    const char *str8 = "";
    char ch8 = 'a';
    
    printf("   Cadena: \"\"\n");
    printf("   Buscando: '%c' (0x%02X)\n", ch8, ch8);
    
    print_search_result("strchr custom", ft_strchr(str8, ch8), strchr(str8, ch8), str8, ch8);
    print_search_result("strchr std   ", strchr(str8, ch8), strchr(str8, ch8), str8, ch8);
    print_search_result("strrchr custom", ft_strrchr(str8, ch8), strrchr(str8, ch8), str8, ch8);
    print_search_result("strrchr std   ", strrchr(str8, ch8), strrchr(str8, ch8), str8, ch8);
    printf("\n");
    
    // Test 9: Buscar null terminator en cadena vacía
    printf("9. Buscar null terminator en cadena vacía:\n");
    const char *str9 = "";
    char ch9 = '\0';
    
    printf("   Cadena: \"\"\n");
    printf("   Buscando: '\\0' (0x00)\n");
    
    print_search_result("strchr custom", ft_strchr(str9, ch9), strchr(str9, ch9), str9, ch9);
    print_search_result("strchr std   ", strchr(str9, ch9), strchr(str9, ch9), str9, ch9);
    print_search_result("strrchr custom", ft_strrchr(str9, ch9), strrchr(str9, ch9), str9, ch9);
    print_search_result("strrchr std   ", strrchr(str9, ch9), strrchr(str9, ch9), str9, ch9);
    printf("\n");
    
    // Test 10: Carácter con valor superior a 127
    printf("10. Carácter con valor superior a 127:\n");
    const char *str10 = "Hello\xFFWorld";
    int ch10 = 0xFF;  // ÿ en extended ASCII
    
    printf("   Cadena: "); print_string_visible(str10); printf("\n");
    printf("   Buscando: 0x%02X\n", ch10);
    
    print_search_result("strchr custom", ft_strchr(str10, ch10), strchr(str10, ch10), str10, ch10);
    print_search_result("strchr std   ", strchr(str10, ch10), strchr(str10, ch10), str10, ch10);
    print_search_result("strrchr custom", ft_strrchr(str10, ch10), strrchr(str10, ch10), str10, ch10);
    print_search_result("strrchr std   ", strrchr(str10, ch10), strrchr(str10, ch10), str10, ch10);
    printf("\n");
    
    // Test 11: Carácter negativo (se convierte a unsigned char)
    printf("11. Carácter negativo (se convierte):\n");
    const char *str11 = "Test\xFFString";
    int ch11 = -1;  // Se convierte a 0xFF
    
    printf("   Cadena: "); print_string_visible(str11); printf("\n");
    printf("   Buscando: %d (se convierte a 0xFF)\n", ch11);
    
    print_search_result("strchr custom", ft_strchr(str11, ch11), strchr(str11, ch11), str11, ch11);
    print_search_result("strchr std   ", strchr(str11, ch11), strchr(str11, ch11), str11, ch11);
    print_search_result("strrchr custom", ft_strrchr(str11, ch11), strrchr(str11, ch11), str11, ch11);
    print_search_result("strrchr std   ", strrchr(str11, ch11), strrchr(str11, ch11), str11, ch11);
    printf("\n");
    
    // Resumen de diferencias entre strchr y strrchr
    printf("=== RESUMEN ===\n");
    printf("strchr:  Encuentra la PRIMERA ocurrencia del carácter\n");
    printf("strrchr: Encuentra la ÚLTIMA ocurrencia del carácter\n");
    printf("Ambas funciones:\n");
    printf("• Retornan NULL si el carácter no se encuentra\n");
    printf("• Pueden buscar el null terminator (\\0)\n");
    printf("• El parámetro 'c' se convierte a unsigned char\n");
    printf("• Son case-sensitive (diferencian mayúsculas/minúsculas)\n");
    
    return 0;
}
